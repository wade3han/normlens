<html lang="en">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>

<!-- BOOTSTRAP CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<!-- HITPUB CSS -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i" rel="stylesheet">
<style id="hitpub_css">
    /***********************************************
    MOSAIC BOOSTRAP OVERWRITES
    ***********************************************/
    #hitinfo .card {
        border-radius: 0;
    }

    #hitinfo button.btn-link {
        color: #fff;
        text-decoration: none;
    }


    #hitinfo button.btn-link:hover {
        text-decoration: none;
    }

    #hit ul.question-choice {
        list-style-type: none;
    }

    #question2_accordion .card {
        border-radius: 0;
    }

    #question2_accordion button.btn-link {
        color: #fff;
        text-decoration: none;
    }

    #question2_accordion button.btn-link:hover {
        text-decoration: none;
    }


    /***********************************************
    MOSAIC GENERAL STYLING
    ***********************************************/
    body {
        font-family: "Open Sans", "Roboto", sans-serif;
        line-height: 1.25;
    }

    textarea#feedback {
        width: 100%
    }

    input#submitButton {
        margin: auto;
        display: block;
        background-color: #2172a4;
        color: #fff;
        font-size: 1.125rem;
        padding: .5rem 1rem;
        cursor: pointer;
        border-radius: 1rem;
    }

    input#submitButton:hover {
        background-color: #06486F;
    }

    input[type="radio"] {
        cursor: pointer;
    }

    div.goal-category {
        border-bottom: solid 1px #ccc;
        padding: 1rem 1rem;
    }

    li {
        margin: 0.6em;
    }

    table {
        width: 80%;
        margin: 5px;
    }

    tr {
        border: 1px solid #ccc;
    }

    th {
        width: 20%;
        background-color: #fff;
        font-weight: normal;
        text-align: center;
        padding: 0.5em;
    }


    td {
        padding-left: 20px;
        padding-right: 10px;
    }

    .hide {
        display: none;
    }

    .show {
        display: block;
    }

    /***********************************************
    HIT CUSTOM GENERAL STYLING
    ***********************************************/
    div.card-header {
        background-color: #06486F;
    }

    div.card-header h5 {
        color: #fff !important;
    }

    .question-choice-container label.btn {
        background-color: #eee;
        border: #ccc 1px solid;
        margin-left: 0 !important;
        color: black;
    }

    .legend {
        margin-top: .33rem;
        font-weight: normal;
        padding-left: 40px;
    }

    .legend .label {
        font-style: italic;
    }

    .emphasize {
        font-weight: bold;
        color: black;
        font-style: italic;
    }

    .btn-group-container {
        align: left;
        padding: 0;
    }

    .example {
        pointer-events: none;
    }

    .title {
        font-style: italic;
    }

    .entity {
        color: blue;
        font-weight: bold;
    }

    .use {
        color: purple;
        font-weight: bold;
    }

    .btn-group-xs > .btn, .btn-xs {
        padding: .4rem .4rem;
        font-size: .8rem;
        line-height: 1.2;
        border-radius: .2rem;
    }

    .card-body {
        background-color: #fbfbfb;
    }

    .concept_a {
        color: #0072B2;
        font-weight: bold;
        font-style: italic;
    }

    .concept_b {
        color: #D55E00;
        font-weight: bold;
        font-style: italic;
    }

    .sm-bold {
        font-weight: bold;
        font-style: italic;
        font-size: 80%;
    }


    label[for="2"]:hover, label[for="2"].active {
        background-color: #02523C !important;
        color: white;
    }

    label[for="1"]:hover, label[for="1"].active {
        background-color: #047D5C !important;
        color: white;
    }

    label[for="0"]:hover, label[for="0"].active {
        background-color: #D55E00 !important;
        color: white;
    }

    label[for="-1"]:hover, label[for="-1"].active {
        background-color: #7F0404 !important;
        color: white;
    }

    label[for="-2"]:hover, label[for="-2"].active {
        background-color: #222 !important;
        color: white;
    }

    label[for="-9"]:hover, label[for="-9"].active {
        background-color: #555 !important;
        color: white;
    }

    /* Dashed border */
    hr.dashed {
        border-top: 2px dashed #bbb;
    }

    /* Dotted border */
    hr.dotted {
        border-top: 2px dotted #bbb;
    }

    /* Solid border */
    hr.solid {
        border-top: 2px solid #bbb;
    }

    /* Rounded border */
    hr.rounded {
        border-top: 8px solid #bbb;
        border-radius: 5px;
    }

</style>

<!-- HIT START -->
<div id="hit" class="container">

    <!-- ACCORDION START -->
    <div class="col-12 accordion" id="hitinfo">

        <!-- INSTRUCTIONS START -->
        <div class="card">
            <div class="card-header" id="instructionsHeading">
                <h5 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#instructions"
                            aria-expanded="true" aria-controls="instructions">
                        Instructions (click to expand/collapse)
                    </button>
                </h5>
            </div>
            <div class="collapse show" id="instructions" aria-labelledby="instructionsHeading" data-parent="#hitinfo">
                <div class="card-body">
                    <div class="card-content">
                        <p style="font-size:14pt;"><span class="badge badge-danger">WARNING</span> This HIT may contain
                            <strong>adult content</strong> and may be <strong>offensive</strong> or
                            <strong>upsetting</strong>. <strong style="color:orange;">Worker discretion is strongly
                                advised</strong>.</p>
                        <p style="font-size:14pt;"><span class="badge badge-danger">WARNING</span> Current employees of
                            the
                            <strong>University of Washington</strong>, family members of UW employees, and UW students
                            involved in this particular research are <strong>not eligible</strong> to complete this HIT.
                        </p>
                        <hr class="solid">

                        <p>Thanks for participating in this HIT!
                            <br><br>
                            In this task, we are asking you to see <b>the image</b> and assume that <b>you are in the
                                situation of the
                                image.</b> We will give you <b>an action</b> and you need to respond whether doing this
                            action is
                            <b>morally appropriate or not</b>, then you need to <b>provide the explanation about your
                                judgment.</b>
                            There will be THREE candidates for you to choose from.
                        </p>

                        <!-- <p>Rules:</p> -->
                        <span class="badge badge-dark">Rules</span>
                        <ul>
                            <li> Read <strong>carefully</strong>, and answer <strong>intuitively</strong>.
                            <li> If you see the word <strong>Delphi</strong>, it refers to an AI system that's
                                designed to answer morality related questions.
                            <li> Try to judge as <strong>objectively</strong> as possible.
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header" id="exampleHeading" style="background-color: #099268">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#examples"
                            aria-expanded="false" aria-controls="examples">
                        Examples of moral judgment and the explanation about the judgment (click to expand/collapse)
                    </button>
                </h5>
            </div>
            <div class="collapse" id="examples" aria-labelledby="exampleheading" data-parent="#hitinfo">
                <div class="card-body">
                    <div class="card-content">
                        <div class="row border-bottom mb-3">
                            <h5 class="col col-12 bg-dark text-light">Example 1</h5>
                            <div class="card-group">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Image</h5>
                                        <img style="width: 100%;max-height: 100%"
                                             src="https://storage.googleapis.com/mosaic-yj-public/image/ca53c5cf1462e8cedd18f07448ea3.jpg"/>
                                        <br>
                                        <h5 class="card-title">Action</h5>
                                        <div class="card-content">Cutting the tree without permission</div>
                                    </div>
                                </div>
                                <div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Moral Judgment</h5>
                                            How do you think about the action in ethical perspective?

                                            Choose one option from the three candidates.
                                            <br><br>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex1_moral_judgment"
                                                       id="ex1_moral_judgment_inappropriate"
                                                       autocomplete="off" value="0" checked>
                                                <label class="form-check-label" for="ex1_moral_judgment_inappropriate">
                                                    <div class="badge badge-danger"
                                                         style="font-size:medium">Morally inappropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex1_moral_judgment"
                                                       id="ex1_moral_judgment_appropriate"
                                                       autocomplete="off" value="1">
                                                <label class="form-check-label" for="ex1_moral_judgment_appropriate">
                                                    <div class="badge badge-success"
                                                         style="font-size:medium">Morally appropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex1_moral_judgment"
                                                       id="ex1_moral_judgment_not_possible"
                                                       autocomplete="off" value="2">
                                                <label class="form-check-label" for="ex1_moral_judgment_not_possible">
                                    <span class="badge badge-dark"
                                          style="font-size:medium">It is not possible to perform the action physically</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Explanation about the moral judgment</h5>
                                            <div class="imessage">
                                                The tree is the property of the mountain, and it is not allowed to cut
                                                the tree without permission.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row border-bottom mb-3">
                            <h5 class="col col-12 bg-dark text-light">Example 2</h5>
                            <div class="card-group">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Image</h5>
                                        <img style="width: 100%;max-height: 100%"
                                             src="https://storage.googleapis.com/mosaic-yj-public/image/ca53c5cf1462e8cedd18f07448ea3.jpg"/>
                                        <br>
                                        <h5 class="card-title">Action</h5>
                                        <div class="card-content">Admire the view</div>
                                    </div>
                                </div>
                                <div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Moral Judgment</h5>
                                            How do you think about the action in ethical perspective?

                                            Choose one option from the three candidates.
                                            <br><br>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex2_moral_judgment"
                                                       id="ex2_moral_judgment_inappropriate"
                                                       autocomplete="off" value="0">
                                                <label class="form-check-label" for="ex2_moral_judgment_inappropriate">
                                                    <div class="badge badge-danger"
                                                         style="font-size:medium">Morally inappropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex2_moral_judgment"
                                                       id="ex2_moral_judgment_appropriate"
                                                       autocomplete="off" value="1" checked>
                                                <label class="form-check-label" for="ex2_moral_judgment_appropriate">
                                                    <div class="badge badge-success"
                                                         style="font-size:medium">Morally appropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex2_moral_judgment"
                                                       id="ex2_moral_judgment_not_possible"
                                                       autocomplete="off" value="2">
                                                <label class="form-check-label" for="ex2_moral_judgment_not_possible">
                                    <span class="badge badge-dark"
                                          style="font-size:medium">It is not possible to perform the action physically</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Explanation about the moral judgment</h5>
                                            <div class="imessage">
                                                It is okay to admire the view of the mountain.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row border-bottom mb-3">
                            <h5 class="col col-12 bg-dark text-light">Example 3</h5>
                            <div class="card-group">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Image</h5>
                                        <img style="width: 100%;max-height: 100%"
                                             src="https://storage.googleapis.com/mosaic-yj-public/image/ca53c5cf1462e8cedd18f07448ea3.jpg"/>
                                        <br>
                                        <h5 class="card-title">Action</h5>
                                        <div class="card-content">Do surfing with friends</div>
                                    </div>
                                </div>
                                <div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Moral Judgment</h5>
                                            How do you think about the action in ethical perspective?

                                            Choose one option from the three candidates.
                                            <br><br>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex3_moral_judgment"
                                                       id="ex3_moral_judgment_inappropriate"
                                                       autocomplete="off" value="0">
                                                <label class="form-check-label" for="ex3_moral_judgment_inappropriate">
                                                    <div class="badge badge-danger"
                                                         style="font-size:medium">Morally inappropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex3_moral_judgment"
                                                       id="ex3_moral_judgment_appropriate"
                                                       autocomplete="off" value="1">
                                                <label class="form-check-label" for="ex3_moral_judgment_appropriate">
                                                    <div class="badge badge-success"
                                                         style="font-size:medium">Morally appropriate
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="row offset-1 mt-1">
                                                <input class="form-check-input" type="radio" name="ex3_moral_judgment"
                                                       id="ex3_moral_judgment_not_possible"
                                                       autocomplete="off" value="2" checked>
                                                <label class="form-check-label" for="ex3_moral_judgment_not_possible">
                                    <span class="badge badge-dark"
                                          style="font-size:medium">It is not possible to perform the action physically</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Explanation about the moral judgment</h5>
                                            <div class="imessage">
                                                It is not possible to surf in the mountain.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- INSTRUCTIONS END -->
    </div>
    <!-- ACCORDION END -->

    <!-- MTURK INPUT START -->
    <div class="col-12 mt-3 mb-1 border-top">

        <form name='mturk_form' method='post' id='mturk_form' action='https://www.mturk.com/mturk/externalSubmit'>
            <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
            <input type='hidden' name='ee' id='ee'/>
            <!-- GOAL CATEGORY MACRO END -->
            <!-- GOAL CAT START -->
            <br>
            <div id="task_1" class="question">
                <div class="question-header question-choice-container pl-5 mb-2 pt-2 pb-2 border-bottom">
                    <div id="wrapper_judgment_1_1">
                        <strong>Question:</strong>
                        Assume that you are in the situation of the image.
                        Judge this action whether it is morally appropriate or not.
                        (If the image is not loaded, please leave FEEDBACK at the below.)
                        <div class="row bg-light pl-1 pt-2"
                             style="border: 1px dotted lightgray; border-left: 3px solid black;">
                            <div class="col-12 pb-1"><span class="badge badge-dark">Image:</span></div>
                            <div class="col-12"><img src=${img}></div>
                        </div>
                        <div class="row bg-light pt-2 mb-1"
                             style="border: 1px dotted lightgray; border-left: 3px solid black;">
                            <div class="col-12 pb-1"><span class="badge badge-info">Action:</span></div>
                            <div class="col-12">${action}</div>
                        </div>
                        <div class="row-12 pt-1 pl-3 btn-group-container show">

                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Moral Judgment</h5>
                                    How do you think about the action in ethical perspective?

                                    Choose one option from the three candidates.
                                    <br><br>
                                    <div class="row offset-1 mt-1">
                                        <input class="form-check-input" type="radio" name="moral_judgment"
                                               id="moral_judgment_inappropriate"
                                               autocomplete="off" value="0" required>
                                        <label class="form-check-label" for="moral_judgment_inappropriate">
                                            <div class="badge badge-danger"
                                                 style="font-size:medium">Morally inappropriate
                                            </div>
                                        </label>
                                    </div>
                                    <div class="row offset-1 mt-1">
                                        <input class="form-check-input" type="radio" name="moral_judgment"
                                               id="moral_judgment_appropriate"
                                               autocomplete="off" value="1" required>
                                        <label class="form-check-label" for="moral_judgment_appropriate">
                                            <div class="badge badge-success"
                                                 style="font-size:medium">Morally appropriate
                                            </div>
                                        </label>
                                    </div>
                                    <div class="row offset-1 mt-1">
                                        <input class="form-check-input" type="radio" name="moral_judgment"
                                               id="moral_judgment_not_possible"
                                               autocomplete="off" value="2" required>
                                        <label class="form-check-label" for="moral_judgment_not_possible">
                                    <span class="badge badge-dark"
                                          style="font-size:medium">It is not possible to perform the action physically</span>
                                        </label>
                                    </div>
                                </div>
                            </div>


                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Explanation about the moral judgment</h5>
                                    <div class="imessage">

                                        <textarea class="form-control" style="background-color:white" id="explanation"
                                                  name="explanation"
                                                  placeholder="Please write your explanation about the moral judgment here, try your best to explain it verbosely."
                                                  rows="2" required></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- GOAL CAT END -->

            <!-- OPTIONAL FEEDBACK -->
            <div class="row mt-5">
                <div class="col-8 offset-2 col-lg-6 offset-lg-3">
                    <p>(Optional) Please let us know if anything was unclear, if you experienced any issues, or if
                        you
                        have
                        any other feedback for us.</p>
                    <textarea id="feedback" name="feedback" rows=3></textarea>
                </div>
            </div>

            <!-- SUBMIT BUTTON -->
            <div class="row mt-5">
                <div class="col-2 offset-5">
                    <input id="submitButton" onclick="getnext()" type="submit" value="Submit">
                </div>
            </div>

        </form>
        <script language='Javascript'>turkSetAssignmentID();</script>
    </div>
    <!-- MTURK INPUT END -->

</div>
<!-- HIT END -->

<!-- BOOSTRAP JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<!-- HITPUB JS -->
<script id="hitpub_js">
    // TimeMe.js
    (function () {
        var e, t;
        e = this, t = function () {
            var r = {
                startStopTimes: {},
                idleTimeoutMs: 3e4,
                currentIdleTimeMs: 0,
                checkStateRateMs: 250,
                active: !1,
                idle: !1,
                currentPageName: "default-page-name",
                timeElapsedCallbacks: [],
                userLeftCallbacks: [],
                userReturnCallbacks: [],
                trackTimeOnElement: function (e) {
                    var t = document.getElementById(e);
                    t && (t.addEventListener("mouseover", function () {
                        r.startTimer(e)
                    }), t.addEventListener("mousemove", function () {
                        r.startTimer(e)
                    }), t.addEventListener("mouseleave", function () {
                        r.stopTimer(e)
                    }), t.addEventListener("keypress", function () {
                        r.startTimer(e)
                    }), t.addEventListener("focus", function () {
                        r.startTimer(e)
                    }))
                },
                getTimeOnElementInSeconds: function (e) {
                    var t = r.getTimeOnPageInSeconds(e);
                    return t || 0
                },
                startTimer: function (e, t) {
                    if (e || (e = r.currentPageName), void 0 === r.startStopTimes[e]) r.startStopTimes[e] = []; else {
                        var n = r.startStopTimes[e], i = n[n.length - 1];
                        if (void 0 !== i && void 0 === i.stopTime) return
                    }
                    r.startStopTimes[e].push({startTime: t || new Date, stopTime: void 0}), r.active = !0, r.idle = !1
                },
                stopAllTimers: function () {
                    for (var e = Object.keys(r.startStopTimes), t = 0; t < e.length; t++) r.stopTimer(e[t])
                },
                stopTimer: function (e, t) {
                    e || (e = r.currentPageName);
                    var n = r.startStopTimes[e];
                    void 0 !== n && 0 !== n.length && (void 0 === n[n.length - 1].stopTime && (n[n.length - 1].stopTime = t || new Date), r.active = !1)
                },
                getTimeOnCurrentPageInSeconds: function () {
                    return r.getTimeOnPageInSeconds(r.currentPageName)
                },
                getTimeOnPageInSeconds: function (e) {
                    var t = r.getTimeOnPageInMilliseconds(e);
                    return void 0 === t ? void 0 : t / 1e3
                },
                getTimeOnCurrentPageInMilliseconds: function () {
                    return r.getTimeOnPageInMilliseconds(r.currentPageName)
                },
                getTimeOnPageInMilliseconds: function (e) {
                    var t = r.startStopTimes[e];
                    if (void 0 !== t) {
                        for (var n = 0, i = 0; i < t.length; i++) {
                            var s = t[i].startTime, o = t[i].stopTime;
                            void 0 === o && (o = new Date), n += o - s
                        }
                        return Number(n)
                    }
                },
                getTimeOnAllPagesInSeconds: function () {
                    for (var e = [], t = Object.keys(r.startStopTimes), n = 0; n < t.length; n++) {
                        var i = t[n], s = r.getTimeOnPageInSeconds(i);
                        e.push({pageName: i, timeOnPage: s})
                    }
                    return e
                },
                setIdleDurationInSeconds: function (e) {
                    var t = parseFloat(e);
                    if (!1 !== isNaN(t)) throw {
                        name: "InvalidDurationException",
                        message: "An invalid duration time (" + e + ") was provided."
                    };
                    return r.idleTimeoutMs = 1e3 * e, this
                },
                setCurrentPageName: function (e) {
                    return r.currentPageName = e, this
                },
                resetRecordedPageTime: function (e) {
                    delete r.startStopTimes[e]
                },
                resetAllRecordedPageTimes: function () {
                    for (var e = Object.keys(r.startStopTimes), t = 0; t < e.length; t++) r.resetRecordedPageTime(e[t])
                },
                resetIdleCountdown: function () {
                    r.idle && r.triggerUserHasReturned(), r.idle = !1, r.currentIdleTimeMs = 0
                },
                callWhenUserLeaves: function (e, t) {
                    this.userLeftCallbacks.push({callback: e, numberOfTimesToInvoke: t})
                },
                callWhenUserReturns: function (e, t) {
                    this.userReturnCallbacks.push({callback: e, numberOfTimesToInvoke: t})
                },
                triggerUserHasReturned: function () {
                    if (!r.active) for (var e = 0; e < this.userReturnCallbacks.length; e++) {
                        var t = this.userReturnCallbacks[e], n = t.numberOfTimesToInvoke;
                        (isNaN(n) || void 0 === n || 0 < n) && (t.numberOfTimesToInvoke -= 1, t.callback())
                    }
                    r.startTimer()
                },
                triggerUserHasLeftPage: function () {
                    if (r.active) for (var e = 0; e < this.userLeftCallbacks.length; e++) {
                        var t = this.userLeftCallbacks[e], n = t.numberOfTimesToInvoke;
                        (isNaN(n) || void 0 === n || 0 < n) && (t.numberOfTimesToInvoke -= 1, t.callback())
                    }
                    r.stopAllTimers()
                },
                callAfterTimeElapsedInSeconds: function (e, t) {
                    r.timeElapsedCallbacks.push({timeInSeconds: e, callback: t, pending: !0})
                },
                checkState: function () {
                    for (var e = 0; e < r.timeElapsedCallbacks.length; e++) r.timeElapsedCallbacks[e].pending && r.getTimeOnCurrentPageInSeconds() > r.timeElapsedCallbacks[e].timeInSeconds && (r.timeElapsedCallbacks[e].callback(), r.timeElapsedCallbacks[e].pending = !1);
                    !1 === r.idle && r.currentIdleTimeMs > r.idleTimeoutMs ? (r.idle = !0, r.triggerUserHasLeftPage()) : r.currentIdleTimeMs += r.checkStateRateMs
                },
                visibilityChangeEventName: void 0,
                hiddenPropName: void 0,
                listenForVisibilityEvents: function () {
                    void 0 !== document.hidden ? (r.hiddenPropName = "hidden", r.visibilityChangeEventName = "visibilitychange") : void 0 !== document.mozHidden ? (r.hiddenPropName = "mozHidden", r.visibilityChangeEventName = "mozvisibilitychange") : void 0 !== document.msHidden ? (r.hiddenPropName = "msHidden", r.visibilityChangeEventName = "msvisibilitychange") : void 0 !== document.webkitHidden && (r.hiddenPropName = "webkitHidden", r.visibilityChangeEventName = "webkitvisibilitychange"), document.addEventListener(r.visibilityChangeEventName, function () {
                        document[r.hiddenPropName] ? r.triggerUserHasLeftPage() : r.triggerUserHasReturned()
                    }, !1), window.addEventListener("blur", function () {
                        r.triggerUserHasLeftPage()
                    }), window.addEventListener("focus", function () {
                        r.triggerUserHasReturned()
                    }), document.addEventListener("mousemove", function () {
                        r.resetIdleCountdown()
                    }), document.addEventListener("keyup", function () {
                        r.resetIdleCountdown()
                    }), document.addEventListener("touchstart", function () {
                        r.resetIdleCountdown()
                    }), window.addEventListener("scroll", function () {
                        r.resetIdleCountdown()
                    }), setInterval(function () {
                        r.checkState()
                    }, r.checkStateRateMs)
                },
                websocket: void 0,
                websocketHost: void 0,
                setUpWebsocket: function (e) {
                    if (window.WebSocket && e) {
                        var t = e.websocketHost;
                        try {
                            r.websocket = new WebSocket(t), window.onbeforeunload = function () {
                                r.sendCurrentTime(e.appId)
                            }, r.websocket.onopen = function () {
                                r.sendInitWsRequest(e.appId)
                            }, r.websocket.onerror = function (e) {
                                console && console.log("Error occurred in websocket connection: " + e)
                            }, r.websocket.onmessage = function (e) {
                                console && console.log(e.data)
                            }
                        } catch (e) {
                            console && console.error("Failed to connect to websocket host.  Error:" + e)
                        }
                    }
                    return this
                },
                websocketSend: function (e) {
                    r.websocket.send(JSON.stringify(e))
                },
                sendCurrentTime: function (e) {
                    var t = {
                        type: "INSERT_TIME",
                        appId: e,
                        timeOnPageMs: r.getTimeOnCurrentPageInMilliseconds(),
                        pageName: r.currentPageName
                    };
                    r.websocketSend(t)
                },
                sendInitWsRequest: function (e) {
                    var t = {type: "INIT", appId: e};
                    r.websocketSend(t)
                },
                initialize: function (e) {
                    var t = r.idleTimeoutMs || 30, n = r.currentPageName || "default-page-name", i = void 0, s = void 0;
                    e && (t = e.idleTimeoutInSeconds || t, n = e.currentPageName || n, i = e.websocketOptions, s = e.initialStartTime), r.setIdleDurationInSeconds(t).setCurrentPageName(n).setUpWebsocket(i).listenForVisibilityEvents(), r.startTimer(void 0, s)
                }
            };
            return r
        }, "undefined" != typeof module && module.exports ? module.exports = t() : "function" == typeof define && define.amd ? define([], function () {
            return e.TimeMe = t()
        }) : e.TimeMe = t()
    }).call(this);

    TimeMe.initialize({
        currentPageName: "task",
        idleTimeoutInSeconds: 30
    });

    $(document).ready(function () {
        var cookie_name = 'stage1';

        $('.collapse').collapse({'toggle': false}).on('hidden.bs.collapse', function () {
            if (this.id) {
                localStorage[this.id + cookie_name] = 'true';
            }
        }).on('shown.bs.collapse', function () {
            if (this.id) {
                localStorage.removeItem(this.id + cookie_name);
            }
        }).each(function () {
            if (this.id && localStorage[this.id + cookie_name] == 'true') {
                $(this).collapse('hide');
            }
        });

        $('#submitButton').click(function () {
            try {
                $('input[name=ee]').attr('value', TimeMe.getTimeOnCurrentPageInSeconds());
            } catch {
            }
            return true;
        });
    });
</script>
